<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Platforms</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.9422d7ed.css" as="style"><link rel="preload" href="/assets/js/app.0774983a.js" as="script"><link rel="preload" href="/assets/js/2.f1c961ca.js" as="script"><link rel="preload" href="/assets/js/17.638c8a0e.js" as="script"><link rel="prefetch" href="/assets/js/10.e46d72ad.js"><link rel="prefetch" href="/assets/js/11.8254d096.js"><link rel="prefetch" href="/assets/js/12.ee9e402b.js"><link rel="prefetch" href="/assets/js/13.83e5ba5e.js"><link rel="prefetch" href="/assets/js/14.b28cb6fa.js"><link rel="prefetch" href="/assets/js/15.bc06572c.js"><link rel="prefetch" href="/assets/js/16.adf7ee00.js"><link rel="prefetch" href="/assets/js/18.661a591c.js"><link rel="prefetch" href="/assets/js/19.7fb5808b.js"><link rel="prefetch" href="/assets/js/20.ecf034ed.js"><link rel="prefetch" href="/assets/js/21.9b198a89.js"><link rel="prefetch" href="/assets/js/22.6a51d93b.js"><link rel="prefetch" href="/assets/js/23.0a1cfe35.js"><link rel="prefetch" href="/assets/js/24.b90ca5c4.js"><link rel="prefetch" href="/assets/js/25.33941b02.js"><link rel="prefetch" href="/assets/js/26.95b36b7b.js"><link rel="prefetch" href="/assets/js/27.3535f59c.js"><link rel="prefetch" href="/assets/js/28.64562af7.js"><link rel="prefetch" href="/assets/js/29.849624e7.js"><link rel="prefetch" href="/assets/js/3.7ef52252.js"><link rel="prefetch" href="/assets/js/30.cbe296a5.js"><link rel="prefetch" href="/assets/js/31.6cbf0b0f.js"><link rel="prefetch" href="/assets/js/32.5b861b2b.js"><link rel="prefetch" href="/assets/js/33.acf6a958.js"><link rel="prefetch" href="/assets/js/34.a957457a.js"><link rel="prefetch" href="/assets/js/35.1035d599.js"><link rel="prefetch" href="/assets/js/36.fcc7fbc8.js"><link rel="prefetch" href="/assets/js/37.bbcb34fe.js"><link rel="prefetch" href="/assets/js/38.326e2ab1.js"><link rel="prefetch" href="/assets/js/39.4db4134f.js"><link rel="prefetch" href="/assets/js/4.4c2548f6.js"><link rel="prefetch" href="/assets/js/40.b6150ce1.js"><link rel="prefetch" href="/assets/js/5.8a2b5103.js"><link rel="prefetch" href="/assets/js/6.3a5b4460.js"><link rel="prefetch" href="/assets/js/7.60024c79.js"><link rel="prefetch" href="/assets/js/8.bcfb9593.js"><link rel="prefetch" href="/assets/js/9.e0370369.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9422d7ed.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="platforms"><a href="#platforms" class="header-anchor">#</a> Platforms</h1> <h2 id="prerequisites-for-the-development-git-hub-user-s-guide"><a href="#prerequisites-for-the-development-git-hub-user-s-guide" class="header-anchor">#</a> Prerequisites for the development: git(hub) user's guide</h2> <p>As a developer, you first have to sign up to <a href="https://github.com/" target="_blank" rel="noopener noreferrer">Github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to be able to contribute to ezPAARSE and:</p> <ul><li>write a new parser</li> <li>maintain an existing parser</li> <li>contribute to improvements in the core of ezPAARSE's code</li></ul> <p>You then need to know a few <a href="http://git-scm.com/" target="_blank" rel="noopener noreferrer">git<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> commands:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#get a local version of the github</span>
<span class="token function">git</span> clone https://github.com/ezpaarse-project/ezpaarse.git

<span class="token comment">#if you already had the project, update it</span>
<span class="token builtin class-name">cd</span> ezpaarse/
<span class="token function">git</span> pull

<span class="token comment">#edit a file</span>
<span class="token builtin class-name">cd</span> ezpaarse/
<span class="token builtin class-name">echo</span> <span class="token string">&quot;// my modification&quot;</span> <span class="token operator">&gt;&gt;</span> ./app.js

<span class="token comment">#get an overview of which files have been modified/added/deleted (before a commit)</span>
<span class="token function">git</span> status

<span class="token comment">#compare the local modifications with the local repository, line by line, before saving the modifications</span>
<span class="token function">git</span> <span class="token function">diff</span>

<span class="token comment">#send the modifications to you local repository</span>
<span class="token function">git</span> commit ./app.js -m <span class="token string">&quot;a comment explaining my modification&quot;</span>&quot;

<span class="token comment">#display the list of commits</span>
<span class="token function">git</span> log

<span class="token comment">#add a new file</span>
<span class="token function">touch</span> ./myexamplefile
<span class="token function">git</span> <span class="token function">add</span> ./myexamplefile
<span class="token function">git</span> commit ./myexamplefile -m <span class="token string">&quot;add an example file&quot;</span>

<span class="token comment">#send the (commmitted) modifications to the distant repository (authorization from the distant repo needed).</span>
<span class="token function">git</span> push
</code></pre></div><p>Note: unless you have a privileged access (from the ezPAARSE team), you must first &quot;fork&quot; the ezPAARSE github repository in order to work on that copy. Once you are satisfied with your changes, you can submit your work to the team by sending a <a href="https://help.github.com/articles/using-pull-requests" target="_blank" rel="noopener noreferrer">&quot;pull request&quot;<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Your job will be reviewed and integrated by the team, if no problem is detected. The team then provides write access rights to regular contributors, in order to facilitate contributions.</p> <h2 id="how-does-a-parser-work"><a href="#how-does-a-parser-work" class="header-anchor">#</a> How does a parser work?</h2> <p>A parser takes the form of an executable <code>parser.js</code> file accompanied by a description file <a href="https://github.com/ezpaarse-project/ezpaarse-platforms/blob/master/sd/manifest.json" target="_blank" rel="noopener noreferrer">manifest.json<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and a validation structure (contained in the <code>test</code> directory, see below).</p> <p>The executable can take two kinds of input:</p> <ul><li>a stream of URLs to analyze (one per line)</li> <li>or stream of JSON objects (one per line) with the <code>--json</code> option, each containing:
<ul><li>the <code>url</code> to analyze</li> <li>other information to qualify the access event (such as the size of the download)</li></ul></li></ul> <p>The parser outputs a stream of JSON objects, one per line and for each analyzed URL. The object may be empty if the parser doesn't find anything.</p> <p>Its usage is documented when you call it with the <code>--help</code> option.
An <a href="https://github.com/ezpaarse-project/ezpaarse-platforms/blob/master/js-parser-skeleton/parser.js" target="_blank" rel="noopener noreferrer">example parser<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is available.</p> <h3 id="usage-examples"><a href="#usage-examples" class="header-anchor">#</a> Usage Examples</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;http://www.sciencedirect.com:80/science/bookseries/00652296&quot;</span> <span class="token operator">|</span> ./parser.js
<span class="token comment">#{&quot;unitid&quot;:&quot;00652296&quot;,&quot;print_identifier&quot;:&quot;0065-2296&quot;,&quot;title_id&quot;:&quot;00652296&quot;,&quot;rtype&quot;:&quot;BOOKSERIE&quot;,&quot;mime&quot;:&quot;MISC&quot;}</span>

<span class="token builtin class-name">echo</span> <span class="token string">'{ &quot;url&quot;: &quot;http://www.sciencedirect.com:80/science/bookseries/00652296&quot;, &quot;status&quot;: 200 }'</span> <span class="token operator">|</span> ./parser.js --json
<span class="token comment">#{&quot;unitid&quot;:&quot;00652296&quot;,&quot;print_identifier&quot;:&quot;0065-2296&quot;,&quot;title_id&quot;:&quot;00652296&quot;,&quot;rtype&quot;:&quot;BOOKSERIE&quot;,&quot;mime&quot;:&quot;MISC&quot;}</span>
</code></pre></div><h2 id="writing-a-parser"><a href="#writing-a-parser" class="header-anchor">#</a> Writing a Parser</h2> <p>Parsers are written in <strong>Javascript</strong>. A good knowledge of the language is not really necessary to write a parser. Most of the code being outsourced in a common file for all parsers, only the URL analysis function must be adapted, making the code short and relatively simple. Most parsers still require a basic knowledge of <strong>regular expressions</strong>.</p> <p>Writing a new parser thus consists of:</p> <ul><li>creating the manifest.json file (see below)</li> <li>creating the test file, according to what is documented on the plaftform analysis page</li> <li>creating the parser so that its output is conform to the test file (see below)</li> <li>launch the validation tests (see below)</li></ul> <p>Once the parser passes the tests, it can be integrated into the github repo.</p> <p>You can either work from the <code>platforms</code> directory in an ezPAARSE instance, or clone the <a href="https://github.com/ezpaarse-project/ezpaarse-platforms" target="_blank" rel="noopener noreferrer">ezpaarse-platforms<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> repository.</p> <p>A <a href="https://github.com/ezpaarse-project/ezpaarse-platforms/tree/master/js-parser-skeleton" target="_blank" rel="noopener noreferrer">skeleton<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> can be used as a starting point. The directory structure and base files can be automatically generated by executing <code>make init</code> from the root directory of the platforms (you may need to launch <code>make install</code> before).</p> <p>Some tools are available online to <a href="http://www.regexper.com/" target="_blank" rel="noopener noreferrer">help you in the the writing of regular expressions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="testing-parsers"><a href="#testing-parsers" class="header-anchor">#</a> Testing Parsers</h2> <p>Each parser comes with the necessary to be tested: one or more files located in the <code>test</code> subdirectory. These files are in CSV format and follow the <code>platform.version.csv</code> pattern.</p> <p>The test principle is represented by the following diagram:
<img src="/images/ezPAARSE-Test-des-Parseurs.png" alt="Parsers' test"></p> <p>For each row, values from columns prefixed with <code>in-</code> are sent to the parser, and the result is compared with the values coming from columns prefixed with <code>out-</code>. These must be strictly identical.</p> <p>More details about the identifiers returned by the parsers are available on <a href="/src/essential/ec-attributes.html">this page</a>.</p> <p>When the parser only takes an input URL (ie. no other fields prefixed with <code>in-</code>), it is possible to manually run the test file with the following command (from the directory the platform):</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#platform.version.csv is the test file</span>
<span class="token function">cat</span> test/platform.version.csv <span class="token operator">|</span> <span class="token punctuation">..</span>/<span class="token punctuation">..</span>/bin/csvextractor --fields<span class="token operator">=</span><span class="token string">&quot;in-url&quot;</span> -c --noheader <span class="token operator">|</span> ./parser.js
</code></pre></div><p>The tests are now integrated into ezPAARSE's platforms folder (instead of coming with the core of ezPAARSE).
It means that ezPAARSE doesn't need to be running, as the parsers' tests are now independent.
Before you launch the platforms' tests, you need to setup the environment:</p> <div class="language- extra-class"><pre class="language-text"><code>cd platforms/
make install
</code></pre></div><p>Then you can either test all parsers:</p> <div class="language- extra-class"><pre class="language-text"><code>make test
</code></pre></div><p>or test only a selection, by naming them (use the shortnames).
For example, if you want to test the parsers for Nature and ScienceDirect:</p> <div class="language- extra-class"><pre class="language-text"><code>make test sd npg
</code></pre></div><p>See the <a href="https://github.com/ezpaarse-project/ezpaarse-platforms/blob/master/README.md" target="_blank" rel="noopener noreferrer">ezpaarse-platforms README<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for more information.</p> <h2 id="description-of-a-parser"><a href="#description-of-a-parser" class="header-anchor">#</a> Description of a parser</h2> <p>The parser is described by a <code>manifest.json</code> file, located in its root directory.
This file contains the following information:</p> <ul><li><strong>name</strong>: the short name of the parser, used as a prefix to the file names. Care should be taken not to use a name already used.</li> <li><strong>version</strong>: the current version of the parser. It is used in the validation file names parsers.</li> <li><strong>longname</strong>: the long name of the parser, used in the documentation.</li> <li><strong>describe</strong>: the description for the parser, can be a paragraph.</li> <li><strong>docurl</strong>: the URL of the documentation on the analogist website (must end by /).</li> <li><strong>domains</strong>: an array of domains that the parser can handle.</li> <li><strong>pkb-domains</strong>: if the platform has a PKB and if domains are present, this field is the column that contains them,</li></ul> <h2 id="vendors-pkbs-management-principles"><a href="#vendors-pkbs-management-principles" class="header-anchor">#</a> Vendors' PKBs management principles</h2> <p>Knowledge bases are used to:</p> <ul><li>match the identifiers found on publishers platforms (which can be specific and proprietary) and standardized identifiers (like ISSNs)</li> <li>include the titles of accessed resources in the results</li></ul> <p>Knowledge bases are saved as text file <a href="http://www.uksg.org/kbart/s1/summary" target="_blank" rel="noopener noreferrer">KBART format<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and are specific to each platform.
The <code>platform_AllTitles.txt</code> file contains the mappings between identifiers of a specific platform and ISSN (or other standardized identifier). The KBART field called <code>title_id</code> is used to establish this correspondence with the <code>print_identifier</code> field (for paper resources) or <code>online_identifier</code> (electronic resources). The <a href="http://www.uksg.org/kbart/s5/guidelines/data_field_labels" target="_blank" rel="noopener noreferrer">list of KBART fields<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and their meaning is available.</p> <p>Knowledge bases are loaded by ezPAARSE and their structure must be previously controlled by the <a href="/src/development/tools.html#pkbvalidator">pkbvalidator tool</a></p> <p><a href="/src/essential/knowledge-base.html">More about knowledge bases</a></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.0774983a.js" defer></script><script src="/assets/js/2.f1c961ca.js" defer></script><script src="/assets/js/17.638c8a0e.js" defer></script>
  </body>
</html>
