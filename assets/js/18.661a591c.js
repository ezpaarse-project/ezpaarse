(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{488:function(t,e,s){"use strict";s.r(e);var r=s(55),a=Object(r.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"process-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#process-api"}},[t._v("#")]),t._v(" Process API")]),t._v(" "),s("p",[t._v("ezPAARSE is a "),s("a",{attrs:{href:"https://en.wikipedia.org/wiki/Representational_state_transfer",target:"_blank",rel:"noopener noreferrer"}},[t._v("RESTful"),s("OutboundLink")],1),t._v(" application.\n"),s("strong",[t._v("REST")]),t._v(": Representational State Transfer")]),t._v(" "),s("h2",{attrs:{id:"sending-logs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sending-logs"}},[t._v("#")]),t._v(" Sending logs")]),t._v(" "),s("p",[t._v("The main route for ezPAARSE is the "),s("strong",[t._v("root")]),t._v(" of the web service. The "),s("strong",[t._v("GET")]),t._v(" method gives access to the logs submission form, and the "),s("strong",[t._v("POST")]),t._v(" method allows sending logs.\nThe submitted files are parsed and access events are sent back, as a resulting stream.")]),t._v(" "),s("table",[s("tr",[s("th",{staticStyle:{"text-align":"left",width:"140px"}},[t._v("PATH")]),t._v(" "),s("th",[t._v(" GET ")]),t._v(" "),s("th",[t._v(" POST ")])]),t._v(" "),s("tr",[s("td",[t._v("/")]),t._v(" "),s("td",[t._v("Submission form")]),t._v(" "),s("td",[t._v("Parses a log file")])])]),t._v(" "),s("h3",{attrs:{id:"the-detailed-post-request"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#the-detailed-post-request"}},[t._v("#")]),t._v(" The detailed POST request")]),t._v(" "),s("p",[s("em",[t._v("POST / HTTP/1.1")])]),t._v(" "),s("h4",{attrs:{id:"parameters-headers"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#parameters-headers"}},[t._v("#")]),t._v(" Parameters (headers)")]),t._v(" "),s("p",[s("RouterLink",{attrs:{to:"/src/configuration/parametres.html"}},[t._v("The parameters list")])],1),t._v(" "),s("h4",{attrs:{id:"body"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#body"}},[t._v("#")]),t._v(" Body")]),t._v(" "),s("p",[t._v("Log lines generated by a proxy server.")]),t._v(" "),s("p",[s("a",{attrs:{href:"http://www.oclc.org/support/documentation/ezproxy/cfg/logformat/",target:"_blank",rel:"noopener noreferrer"}},[t._v("EZProxy documentation"),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"http://www.squid-cache.org/Doc/config/logformat/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Squid documentation"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"response-to-a-post-request"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#response-to-a-post-request"}},[t._v("#")]),t._v(" Response to a POST request")]),t._v(" "),s("h4",{attrs:{id:"status-code"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#status-code"}},[t._v("#")]),t._v(" Status code")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("200 OK:")]),t._v(" the logs have been successfully processed.")]),t._v(" "),s("li",[s("strong",[t._v("400 Bad Request:")]),t._v(" a request element makes the processing of logs impossible.")]),t._v(" "),s("li",[s("strong",[t._v("406 Not Acceptable:")]),t._v(" encoding or output format not supported.")])]),t._v(" "),s("h4",{attrs:{id:"headers"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#headers"}},[t._v("#")]),t._v(" Headers")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Job-ID:")]),t._v(" unique identifier associated to the current processing job.")]),t._v(" "),s("li",[s("strong",[t._v("Job-Report:")]),t._v(" URL for the detailed processing report, including all of the headers sent by ezPAARSE.")]),t._v(" "),s("li",[s("strong",[t._v("ezPAARSE-Status:")]),t._v(" return code if an error is raised.")]),t._v(" "),s("li",[s("strong",[t._v("ezPAARSE-Status-Message:")]),t._v(" explanation message on the return code.")])]),t._v(" "),s("p",[t._v("Headers containing the URLs for accessing the logs :")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Job-Traces:")]),t._v(" traces for the current ezPAARSE job (the verbosity level can be modified with the Traces-Level header)")]),t._v(" "),s("li",[s("strong",[t._v("Lines-Unknown-Formats:")]),t._v(" lines for which the format has not been recognized.")]),t._v(" "),s("li",[s("strong",[t._v("Lines-Ignored-Domains:")]),t._v(" lines for which the domain is ignored.")]),t._v(" "),s("li",[s("strong",[t._v("Lines-Unknown-Domains:")]),t._v(" lines for which the domain is not associated to a parser.")]),t._v(" "),s("li",[s("strong",[t._v("Lines-Unqualified-ECs:")]),t._v(" lines that generated access events with too few information. "),s("RouterLink",{attrs:{to:"/src/features/qualification.html"}},[t._v("(More details)")])],1),t._v(" "),s("li",[s("strong",[t._v("Lines-PKB-Miss-ECs:")]),t._v(" lines that generated identifiers that can't be found in the PKB for the corresponding platform.")]),t._v(" "),s("li",[s("strong",[t._v("Lines-Duplicate-ECs:")]),t._v(" lines filtered out by the double-clicks detection algorithm.")]),t._v(" "),s("li",[s("strong",[t._v("Lines-Unordered-ECs:")]),t._v(" lines rejected because they were not chronologically ordered")]),t._v(" "),s("li",[s("strong",[t._v("Lines-Robots-ECs:")]),t._v(" lines generated by non-human agents (robots, crawlers, spides, etc.).")]),t._v(" "),s("li",[s("strong",[t._v("Lines-Ignored-Hosts:")]),t._v(" lines that were filtered based on their IP address.")]),t._v(" "),s("li",[s("strong",[t._v("Lines-Unknown-Errors:")]),t._v(" lines that were rejected due to unknown errors.")])]),t._v(" "),s("h4",{attrs:{id:"body-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#body-2"}},[t._v("#")]),t._v(" Body")]),t._v(" "),s("p",[t._v("CSV or JSON containing all of the generated access events.")]),t._v(" "),s("p",[t._v("Access event example:")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"host"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1234567d6b8dd5dddc87939c4a407987"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"login"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"IDEXEMPLE"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"date"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2011-12-31T10:42:42+01:00"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"url"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://www.une-adresse.com/exemple.php?id=16"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"200"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"size"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"domain"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"www.une-adresse.com"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"PDF"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"issn"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1111-1111"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"request-examples"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#request-examples"}},[t._v("#")]),t._v(" Request examples")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -X POST http://127.0.0.1:59599 --no-buffer --data-binary @file.log -v\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -X POST --proxy "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v(" --no-buffer --data-binary @test/dataset/sd.2012-11-30.log  http://127.0.0.1:59599 -v\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -X POST --proxy "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v(" --no-buffer -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Accept: application/json"')]),t._v(" --data-binary @test/dataset/sd.2012-11-30.log  http://127.0.0.1:59599 -v\n")])])]),s("h2",{attrs:{id:"access-the-traces-and-rejects"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#access-the-traces-and-rejects"}},[t._v("#")]),t._v(" Access the traces and rejects")]),t._v(" "),s("p",[t._v("When ezPAARSE is processing a request (a job), it generates informative files bound to its activity.\nThose can be accessed by using the unique identifier attributed to the job.")]),t._v(" "),s("table",[s("tr",[s("th",{staticStyle:{"text-align":"left",width:"240px"}},[t._v("PATH")]),t._v(" "),s("th",[t._v("Information given")])]),t._v(" "),s("tr",[s("td",[t._v("/{jobID}/job-traces.log")]),t._v(" "),s("td",[t._v("Traces of the internal process. It's only interesting when a something has gone wrong.")])]),t._v(" "),s("tr",[s("td",[t._v("/{jobID}/job-report.(json|html)")]),t._v(" "),s("td",[t._v("Report aggregating data on the job: how many lines were rejected, reject rate, date and job duration, etc. Use it like /{jobID}/job-report.html?standalone=1 to generate a standalone html report")])]),t._v(" "),s("tr",[s("td",[t._v("/{jobID}/lines-unknown-formats.log")]),t._v(" "),s("td",[t._v("Lines for which the format was not recognized because it doesn't look like the input parameters")])]),t._v(" "),s("tr",[s("td",[t._v("/{jobID}/lines-ignored-domains.log")]),t._v(" "),s("td",[t._v("Lines for which the domain is ignored.")])]),t._v(" "),s("tr",[s("td",[t._v("/{jobID}/lines-unknown-domains.log")]),t._v(" "),s("td",[t._v("Lines for which the domain is not associated to a parser.")])]),t._v(" "),s("tr",[s("td",[t._v("/{jobID}/lines-unqualified-ecs.log")]),t._v(" "),s("td",[t._v("Lines that generated access events with too few information. [(More details)](../features/qualification.html)")])]),t._v(" "),s("tr",[s("td",[t._v("/{jobID}/lines-pkb-miss-ecs.log")]),t._v(" "),s("td",[t._v("Lines that generated identifiers that can't be found in the PKB for the corresponding platform.")])]),t._v(" "),s("tr",[s("td",[t._v("/{jobID}/lines-duplicate-ecs.log")]),t._v(" "),s("td",[t._v("Lines filtered out by the COUNTER double-clicks detection algorithm.")])]),t._v(" "),s("tr",[s("td",[t._v("/{jobID}/lines-unordered-ecs.log")]),t._v(" "),s("td",[t._v("Lines rejected because they were not chronologically ordered.")])]),t._v(" "),s("tr",[s("td",[t._v("/{jobID}/lines-robots-ecs.log")]),t._v(" "),s("td",[t._v("Lines generated by non-human agents (robots, crawlers, spides, etc.).")])]),t._v(" "),s("tr",[s("td",[t._v("/{jobID}/lines-ignored-hosts.log")]),t._v(" "),s("td",[t._v("Lines that were filtered based on their IP address.")])]),t._v(" "),s("tr",[s("td",[t._v("/{jobID}/lines-unknown-errors.log")]),t._v(" "),s("td",[t._v("Lines that were rejected due to unknown errors.")])])]),t._v(" "),s("ul",[s("li",[t._v("jobID: unique identifier attributed to the job.")])]),t._v(" "),s("h2",{attrs:{id:"general-information"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#general-information"}},[t._v("#")]),t._v(" General information")]),t._v(" "),s("p",[t._v("These routes are useful to get various information like: the list of platforms, the types of access events. They only respond to the "),s("em",[t._v("GET")]),t._v(" method.")]),t._v(" "),s("table",[s("tr",[s("th",{staticStyle:{"text-align":"left",width:"140px"}},[t._v("URL")]),t._v(" "),s("th",[t._v("Information given")])]),t._v(" "),s("tr",[s("td",[t._v("/info/platforms")]),t._v(" "),s("td",[t._v("Lists the available plateforms")])]),t._v(" "),s("tr",[s("td",[t._v("/info/rid")]),t._v(" "),s("td",[t._v("Lists the resources identifiers")])]),t._v(" "),s("tr",[s("td",[t._v("/info/rtype")]),t._v(" "),s("td",[t._v("Lists the resources types")])]),t._v(" "),s("tr",[s("td",[t._v("/info/mime")]),t._v(" "),s("td",[t._v("Lists the resources formats (or mimetypes)")])]),t._v(" "),s("tr",[s("td",[t._v("/info/codes")]),t._v(" "),s("td",[t._v("Lists the application's return codes and their meaning")])]),t._v(" "),s("tr",[s("td",[t._v("/info/codes/{code}")]),t._v(" "),s("td",[t._v("Returns the meaning of one return code")])]),t._v(" "),s("tr",[s("td",[t._v("/info/form-predefined")]),t._v(" "),s("td",[t._v("lists the predefined parameters for the advanced options in the form")])]),t._v(" "),s("tr",[s("td",[t._v("/info/usage")]),t._v(" "),s("td",[t._v("General usage statistics")])])]),t._v(" "),s("h2",{attrs:{id:"administration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#administration"}},[t._v("#")]),t._v(" Administration")]),t._v(" "),s("p",[t._v("These routes are used to administrate ezPAARSE. For the most part, they can be used through the application's admin page. They require being authentified, except for /api/admin/register.")]),t._v(" "),s("table",[s("tr",[s("th",{staticStyle:{"text-align":"left",width:"140px"}},[t._v("PATH")]),t._v(" "),s("th",{staticStyle:{"text-align":"left",width:"80px"}},[t._v("Méthode")]),t._v(" "),s("th",[t._v("Usage")])]),t._v(" "),s("tr",[s("td",[t._v("/api/admin/register")]),t._v(" "),s("td",[t._v("POST")]),t._v(" "),s("td",[t._v("Creates the first account as administrator. It doesn't work if one or more users are already existing.\n        "),s("br"),t._v("Parameters: "),s("strong",[t._v("username")]),t._v(", "),s("strong",[t._v("password")])])]),t._v(" "),s("tr",[s("td",[t._v("/api/admin/platforms/status")]),t._v(" "),s("td",[t._v("GET")]),t._v(" "),s("td",[t._v("Reports on the platforms' state\n        "),s("br"),t._v("Returns: "),s("strong",[t._v("uptodate")]),t._v(" or "),s("strong",[t._v("outdated")])])]),t._v(" "),s("tr",[s("td",[t._v("/api/admin/platforms/status")]),t._v(" "),s("td",[t._v("PUT")]),t._v(" "),s("td",[t._v("Updates the platforms\n        "),s("br"),t._v("The body must contain "),s("strong",[t._v("uptodate")])])]),t._v(" "),s("tr",[s("td",[t._v("/api/admin/users")]),t._v(" "),s("td",[t._v("GET")]),t._v(" "),s("td",[t._v("Returns the list of local users")])]),t._v(" "),s("tr",[s("td",[t._v("/api/admin/users/")]),t._v(" "),s("td",[t._v("POST")]),t._v(" "),s("td",[t._v("Creates a local user\n        "),s("br"),t._v("Parameters: "),s("strong",[t._v("username")]),t._v(", "),s("strong",[t._v("password")])])]),t._v(" "),s("tr",[s("td",[t._v("/api/admin/users/{username}")]),t._v(" "),s("td",[t._v("DELETE")]),t._v(" "),s("td",[t._v("Deletes a local user")])])])])}),[],!1,null,null,null);e.default=a.exports}}]);